"use strict";var Bt=Object.create;var fe=Object.defineProperty;var Vt=Object.getOwnPropertyDescriptor;var qt=Object.getOwnPropertyNames;var Jt=Object.getPrototypeOf,jt=Object.prototype.hasOwnProperty;var q=(a,e)=>()=>(a&&(e=a(a=0)),e);var Ot=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),Ht=(a,e)=>{for(var n in e)fe(a,n,{get:e[n],enumerable:!0})},ht=(a,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of qt(e))!jt.call(a,r)&&r!==n&&fe(a,r,{get:()=>e[r],enumerable:!(i=Vt(e,r))||i.enumerable});return a};var Q=(a,e,n)=>(n=a!=null?Bt(Jt(a)):{},ht(e||!a||!a.__esModule?fe(n,"default",{value:a,enumerable:!0}):n,a)),zt=a=>ht(fe({},"__esModule",{value:!0}),a);function qe(){if(Ve===void 0)throw new Error("tsserverlibrary not loaded yet");return Ve}var Ve,A,H=q(()=>{"use strict";(e=>{function a(n){Ve=n}e.install=a})(qe||={});A=qe});var Je,je,ye,ie,Ut,U=q(()=>{"use strict";(e=>{function a(n,i){return{kind:"metaData",completionContext:n,path:i}}e.create=a})(Je||={});(e=>{function a(n,i){return{kind:"errorData",code:n,message:i}}e.create=a})(je||={});(n=>{function a(i,r,o,d){return{kind:"trait",traitKind:d,priority:i,name:r,value:o}}n.create=a;function e(i){return i.name.length+i.value.length}n.sizeInChars=e})(ye||={});(n=>{function a(i,r,o,d,l){return{kind:"snippet",snippetKind:d,uri:i,additionalUris:r,value:o,priority:l??0}}n.create=a;function e(i){let r=i.value.length;if(r+=i.uri.length+3,i.additionalUris!==void 0)for(let o of i.additionalUris)r+=o.length+3;return r}n.sizeInChars=e})(ie||={});(i=>{function a(r){return r.type==="cancelled"}i.isCancelled=a;function e(r){return r.type==="response"&&r.body.items!==void 0}i.isOk=e;function n(r){return r.type==="response"&&r.body.error!==void 0}i.isError=n})(Ut||={})});var W=Ot((sn,xt)=>{"use strict";H();var t=A(),bt=function*(){}(),gt;(V=>{let a=t;V.getTokenAtPosition=a.getTokenAtPosition,V.getTouchingToken=a.getTouchingToken,V.getNameTable=a.getNameTable,V.findReferencedSymbols=a.findReferencedSymbols,V.getSymbolId=a.getSymbolId;class d{cancellationToken;end;constructor(s,u,f=!1){this.cancellationToken=f?void 0:s,this.end=f?Number.MAX_VALUE:Date.now()+u}isCancellationRequested(){return this.cancellationToken&&this.cancellationToken.isCancellationRequested()?!0:Date.now()>this.end}isTimedOut(){return Date.now()>this.end}throwIfCancellationRequested(){if(this.isCancellationRequested())throw new t.OperationCanceledException}}V.CancellationTokenWithTimer=d;class l{isCancellationRequested(){return!1}throwIfCancellationRequested(){}}V.NullCancellationToken=l;let c;(u=>{function _(f){return f.symbol}u.getSymbol=_;function s(f){if(t.isTypeReferenceNode(f))return f.typeName.getText()}u.getTypeName=s})(c=V.Node||={});let p;(s=>{function _(u){return(t.getCombinedModifierFlags(u)&t.ModifierFlags.Private)!==0}s.isPrivate=_})(p=V.Declarations||={});let m;(h=>{let _;(y=>y[y.topLevel=0]="topLevel")(_=h.Mode||={});function s(b){let y=b.kind;return y===t.SyntaxKind.InterfaceDeclaration||y===t.SyntaxKind.ClassDeclaration}h.is=s;function u(b,y=0){return f(b.statements)}h.entries=u;function*f(b){for(let y of b)t.isClassDeclaration(y)||t.isInterfaceDeclaration(y)?yield y:t.isModuleDeclaration(y)&&y.body!==void 0&&t.isModuleBlock(y.body)&&(yield*f(y.body.statements))}})(m=V.TypeDeclarations||={});let g;(h=>{function _(b){let y=b.heritageClauses;if(y!==void 0)return y.find(S=>S.token===t.SyntaxKind.ExtendsKeyword)}h.getExtendsClause=_;function s(b){return u(b.statements)}h.entries=s;function*u(b){for(let y of b)t.isClassDeclaration(y)?yield y:t.isModuleDeclaration(y)&&y.body!==void 0&&t.isModuleBlock(y.body)&&(yield*u(y.body.statements))}function f(b){if(!T.isClass(b))return;let y=b.getDeclarations();if(y!==void 0){for(let S of y)if(t.isClassDeclaration(S))return S}}h.fromSymbol=f})(g=V.ClassDeclarations||={});let I;(u=>{function _(f){return f.getBaseTypes()}u.getBaseTypes=_;function s(f,h){let b=h.getSymbol();if(b===void 0)return;let y=b.getDeclarations();if(y===void 0)return;let S=[];for(let x of y)if(t.isClassDeclaration(x)){let C=x.heritageClauses;if(C!==void 0)for(let F of C)for(let K of F.types)S.push(f.getTypeAtLocation(K.expression))}return S}u.getExtendsTypes=s})(I=V.Types||={});let P;(u=>(u.depthFirst="depthFirst",u.breadthFirst="breadthFirst"))(P=V.Traversal||={});let B;(s=>s.breadthFirstOnly="breadthFirstOnly")(B||={});class G{start;mode;symbols;constructor(s,u,f){this.start=s,this.mode=u,this.symbols=f}isValid(){return T.isClass(this.start)}isValidDeclaration(s){return t.isClassDeclaration(s)}*getDeclarations(s){yield*g.entries(s)}isSubType(s,u){return this.symbols.isSubClass(s,u)}with(s){return new G(s,this.mode,this.symbols)}}class j{start;mode;symbols;constructor(s,u,f){this.start=s,this.mode=u,this.symbols=f}isValid(){return T.isClass(this.start)||T.isInterface(this.start)||T.isTypeAlias(this.start)}isValidDeclaration(s){return m.is(s)||t.isTypeAliasDeclaration(s)}*getDeclarations(s){yield*m.entries(s,0)}isSubType(s,u){return this.symbols.isSubType(s,u)}with(s){return new j(s,this.mode,this.symbols)}}class T{program;typeChecker;constructor(s){this.program=s,this.typeChecker=s.getTypeChecker()}static Unknown="unknown";static Undefined="undefined";static None="none";static getParent(s){return s.parent}static isConstructor(s){return s!==void 0&&(s.getFlags()&t.SymbolFlags.Constructor)!==0}static isGetAccessor(s){return s!==void 0&&(s.getFlags()&t.SymbolFlags.GetAccessor)!==0}static isSetAccessor(s){return s!==void 0&&(s.getFlags()&t.SymbolFlags.SetAccessor)!==0}static isMethod(s){return s!==void 0&&(s.getFlags()&t.SymbolFlags.Method)!==0}static isProperty(s){return s!==void 0&&(s.getFlags()&t.SymbolFlags.Property)!==0}static isClass(s){return s!==void 0&&(s.getFlags()&t.SymbolFlags.Class)!==0}static isInterface(s){return s!==void 0&&(s.getFlags()&t.SymbolFlags.Interface)!==0}static isTypeAlias(s){return s!==void 0&&(s.getFlags()&t.SymbolFlags.TypeAlias)!==0}static isTypeLiteral(s){return s!==void 0&&(s.getFlags()&t.SymbolFlags.TypeLiteral)!==0}static isAlias(s){return s!==void 0&&(s.getFlags()&t.SymbolFlags.Alias)!==0}static isFunction(s){return s!==void 0&&(s.getFlags()&t.SymbolFlags.Function)!==0}static isValueModule(s){return s!==void 0&&(s.getFlags()&t.SymbolFlags.ValueModule)!==0}static isEnum(s){return s!==void 0&&(s.getFlags()&t.SymbolFlags.Enum)!==0}static isRegularEnum(s){return s!==void 0&&(s.getFlags()&t.SymbolFlags.RegularEnum)!==0}static isConstEnum(s){return s!==void 0&&(s.getFlags()&t.SymbolFlags.ConstEnum)!==0}static isBase(s){return s!==void 0&&(s.getFlags()&t.SymbolFlags.Class)!==0}static isPrivate(s){let u=s.declarations;if(u!==void 0){for(let f of u)if((t.getCombinedModifierFlags(f)&t.ModifierFlags.Private)===0)return!1}return!0}static isAbstract(s){let u=s.declarations;if(u!==void 0){for(let f of u)if((t.getCombinedModifierFlags(f)&t.ModifierFlags.Abstract)===0)return!1}return!0}static isStatic(s){let u=s.declarations;if(u!==void 0){for(let f of u)if((t.getCombinedModifierFlags(f)&t.ModifierFlags.Static)===0)return!1}return!0}static fillSources(s,u){if(u.declarations!==void 0)for(let f of u.declarations){let h=f.getSourceFile();h!==void 0&&s.add(h.fileName)}}static getPrimarySource(s){let u=s.declarations;if(!(u===void 0||u.length===0))return u[0].getSourceFile()}static createKey(s,u){let f=s.getDeclarations();if(f===void 0)return;let h=[];for(let y of f){let S=y.getSourceFile();h.push({f:S.fileName,s:y.getStart(),e:y.getEnd(),k:y.kind})}h.length>1&&h.sort((y,S)=>{let x=y.f<S.f?-1:y.f>S.f?1:0;return x!==0||(x=y.s-S.s,x!==0)||(x=y.e-S.e,x!==0)?x:y.k-S.k});let b=u.createHash("md5");return(s.flags&t.SymbolFlags.Transient)!==0&&b.update(JSON.stringify({trans:!0},void 0,0)),b.update(JSON.stringify(h,void 0,0)),b.digest("base64")}static createVersionedKey(s,u,f){let h=s.getDeclarations();if(h===void 0)return;let b=[];for(let S of h){let x=S.getSourceFile(),C=u.getScriptVersion(x);if(C===void 0)return;b.push({f:x.fileName,v:C,s:S.getStart(),e:S.getEnd(),k:S.kind})}b.length>1&&b.sort((S,x)=>{let C=S.f<x.f?-1:S.f>x.f?1:0;return C!==0||(C=S.v<x.v?-1:S.v>x.v?1:0,C!==0)||(C=S.s-x.s,C!==0)||(C=S.e-x.e,C!==0)?C:S.k-x.k});let y=f.createHash("md5");return(s.flags&t.SymbolFlags.Transient)!==0&&y.update(JSON.stringify({trans:!0},void 0,0)),y.update(JSON.stringify(b,void 0,0)),y.digest("base64")}getProgram(){return this.program}getTypeChecker(){return this.typeChecker}getSymbolAtLocation(s){let u=this.typeChecker.getSymbolAtLocation(s);return u===void 0&&(u=c.getSymbol(s)),u}getExtendsSymbol(s){let u=s.declarations;if(u===void 0)return[void 0,void 0];for(let f of u)if(t.isClassDeclaration(f)){let h=f.heritageClauses;if(h!==void 0){for(let b of h)if(b.token===t.SyntaxKind.ExtendsKeyword){let y=b.types[0]?.expression,S=this.typeChecker.getSymbolAtLocation(y);if(T.isAlias(S)&&(S=this.typeChecker.getAliasedSymbol(S)),T.isClass(S))return[S,y.getText()]}}}return[void 0,void 0]}getLeafSymbolAtLocation(s){let u=this.getSymbolAtLocation(s);if(u!==void 0)return T.isAlias(u)?this.typeChecker.getAliasedSymbol(u):u}getSymbolAtTypeNodeLocation(s){return t.isTypeReferenceNode(s)?this.getLeafSymbolAtLocation(s.typeName):t.isTypeLiteralNode(s)?this.getLeafSymbolAtLocation(s):this.getLeafSymbolAtLocation(s)}getAliasedSymbol(s){return this.typeChecker.getAliasedSymbol(s)}getAllSuperTypes(s,u="depthFirst"){return this._getAllSuperTypes(s,u,new Set,!1)}getAllSuperTypesWithPath(s,u="depthFirst"){return this._getAllSuperTypes(s,u,new Set,!0)}getDirectSuperTypes(s){return this._getAllSuperTypes(s,"breadthFirstOnly",new Set,!1)}*_getAllSuperTypes(s,u,f,h){let b=[s];for(;b.length>0;){let y=b.pop();if(T.isAlias(y)&&(f.add(y),y=this.typeChecker.getAliasedSymbol(y)),T.isClass(y)||T.isInterface(y)){let S=y.declarations;if(S===void 0)return;for(let x of S){let C;if((t.isClassDeclaration(x)||t.isInterfaceDeclaration(x))&&(C=x.heritageClauses),C!==void 0)for(let F of C)for(let K of F.types){let w=this.getLeafSymbolAtLocation(K.expression);w!==void 0&&!f.has(w)&&(yield h?[y,w]:w,f.add(w),u==="depthFirst"?yield*this._getAllSuperTypes(w,u,f,h):u==="breadthFirst"&&b.push(w))}}}else if(T.isTypeAlias(y)){let S=y.declarations;if(S===void 0)return;for(let x of S)if(t.isTypeAliasDeclaration(x)){let C=x.type;if(t.isTypeLiteralNode(C)){let F=this.getSymbolAtLocation(C);F!==void 0&&!f.has(F)&&(yield h?[y,F]:F,f.add(F))}else if(t.isTypeReferenceNode(C)){let F=this.getLeafSymbolAtLocation(C.typeName);F!==void 0&&!f.has(F)&&(yield h?[y,F]:F,f.add(F),u==="depthFirst"?yield*this._getAllSuperTypes(F,u,f,h):u==="breadthFirst"&&b.push(F))}else if(t.isIntersectionTypeNode(C))for(let F of C.types){let K=this.getSymbolAtTypeNodeLocation(F);K!==void 0&&!f.has(K)&&(T.isTypeLiteral(K)?(yield h?[y,K]:K,f.add(K)):T.isTypeAlias(K)?(f.add(K),u==="depthFirst"?yield*this._getAllSuperTypes(K,u,f,h):u==="breadthFirst"&&b.push(K)):(yield h?[y,K]:K,f.add(K),u==="depthFirst"?yield*this._getAllSuperTypes(K,u,f,h):u==="breadthFirst"&&b.push(K)))}}}}}getAllSuperClasses(s){return this._getAllSuperClasses(s,new Set)}*_getAllSuperClasses(s,u){if(!T.isClass(s))return;let f=[s];for(;f.length>0;){let b=f.pop().declarations;if(b!==void 0)for(let y of b){if(!t.isClassDeclaration(y))continue;let S=y.heritageClauses;if(S!==void 0)for(let x of S){if(x.token!==t.SyntaxKind.ExtendsKeyword||x.types.length<1)continue;let C=x.types[0],F=this.getLeafSymbolAtLocation(C.expression);F!==void 0&&!u.has(F)&&(yield F,u.add(F),f.push(F))}}}}isSubType(s,u){if(s.heritageClauses===void 0)return!1;for(let f of s.heritageClauses)for(let h of f.types){let b=this.getLeafSymbolAtLocation(h.expression);if(b!==void 0&&b===u)return!0}return!1}isSubClass(s,u){if(s.heritageClauses===void 0)return!1;for(let f of s.heritageClauses){if(f.token!==t.SyntaxKind.ExtendsKeyword)continue;if(f.types.length<1)return!1;let h=this.getLeafSymbolAtLocation(f.types[0].expression);if(h!==void 0&&h===u)return!0}return!1}getDirectSubTypes(s,u,f=new Re){let h=T.isClass(s)?new G(s,"breadthFirstOnly",this):T.isInterface(s)||T.isTypeAlias(s)?new j(s,"breadthFirstOnly",this):void 0;return h===void 0?bt:this._getAllSubTypes(h,u,f,new Set)}getAllSubTypes(s,u="depthFirst",f,h=new Re){let b=T.isClass(s)?new G(s,u,this):T.isInterface(s)||T.isTypeAlias(s)?new j(s,u,this):void 0;return b===void 0?bt:this._getAllSubTypes(b,f,h,new Set)}*_getAllSubTypes(s,u,f=new Re,h){if(!s.isValid())return;let b=[s.start];for(;b.length>0;){let y=b.pop(),S=y.declarations;if(S===void 0||S.length===0)return;for(let x of S){if(!s.isValidDeclaration(x))continue;let C=new _e(this.program,x.getSourceFile(),u,f);for(let F of C)for(let K of s.getDeclarations(F)){let w=this.getLeafSymbolAtLocation(K.name?K.name:K);w===void 0||h.has(w)||s.isSubType(K,y)&&(yield w,h.add(w),s.mode==="depthFirst"?yield*this._getAllSubTypes(s.with(w),u,f,h):s.mode==="breadthFirst"&&b.push(w))}}}}getMemberStatistic(s){let u=new Set,f=new Set;T._getMemberStatistic(u,f,s);for(let h of this.getAllSuperTypes(s))T._getMemberStatistic(u,f,h);return{abstract:u,concrete:f}}static _getMemberStatistic(s,u,f){if(T.isClass(f)){let h=f.declarations;if(h===void 0)return;for(let b of h)if(t.isClassDeclaration(b))for(let y of b.members)if(t.isMethodDeclaration(y)||t.isGetAccessorDeclaration(y)||t.isSetAccessorDeclaration(y)||t.isPropertyDeclaration(y)){let S=y.name.getText();T.includesAbstract(y.modifiers)&&!u.has(S)?s.add(S):u.add(S)}else t.isIndexSignatureDeclaration(y)&&(T.includesAbstract(y.modifiers)&&!u.has("[]")?s.add("[]"):u.add("[]"))}else if((T.isInterface(f)||T.isTypeLiteral(f))&&f.members!==void 0)for(let h of f.members.values())u.has(h.name)||s.add(h.name)}static includesAbstract(s){return s===void 0?!1:s.some(u=>u.kind===t.SyntaxKind.AbstractKeyword)}}V.Symbols=T;let pe;(f=>{function _(h){return h.projectService}f.getProjectService=_;function s(h,b){let y=h;if(typeof y.getFileAndProject=="function")return y.getFileAndProject(b)}f.getFileAndProject=s;function u(h,b,y){let S=h;if(typeof S.getPositionInFile=="function")return S.getPositionInFile(b,y)}f.getPositionInFile=u})(pe=V.Sessions||={});function Rt(_){return _.moduleReference.kind===t.SyntaxKind.ExternalModuleReference&&_.moduleReference.expression.kind===t.SyntaxKind.StringLiteral}class Re{visited;_cache;constructor(s=!1){this.visited=new Map,s&&(this._cache=new Map)}get cache(){return this._cache}ensureCache(){this._cache===void 0&&(this._cache=new Map)}}V.ReferencedByContext=Re;class _e{program;sourceFile;preferredSourceFiles;context;visited;constructor(s,u,f,h){this.program=s,this.sourceFile=u,this.preferredSourceFiles=f,this.context=h,this.visited=_e.getVisited(h.visited,u)}static getVisited(s,u){let f=s.get(u.fileName);return f===void 0&&(f=new Set,s.set(u.fileName,f)),f}getSourceFile(s){return this.program.getSourceFile(s)}[Symbol.iterator](){return this.entries()}*entries(){if(this.context.cache!==void 0&&this.context.cache.has(this.sourceFile.fileName)){for(let S of this.context.cache.get(this.sourceFile.fileName)){let x=this.program.getSourceFile(S);x!==void 0&&(yield x)}return}function s(S){return S.kind===t.SyntaxKind.ModuleDeclaration&&S.name.kind===t.SyntaxKind.StringLiteral}let u=this.context.cache?.get(this.sourceFile.fileName),f=this.program,h=f.getTypeChecker(),b=h.getSymbolAtLocation(this.sourceFile),y=this.visited;for(let S of this.allSourceFiles()){if(this.sourceFile===S){yield S,y.add(S.fileName);continue}if(!(y.has(S.fileName)||this.skipSourceFile(f,S)))if(S.externalModuleIndicator&&S.imports!==void 0){for(let x of S.imports)if(h.getSymbolAtLocation(x)===b){yield S,y.add(S.fileName),u&&u.add(S.fileName);break}}else{let x=S,C=x.kind===t.SyntaxKind.SourceFile?x.statements:x.body.statements,F=K=>{switch(K.kind){case t.SyntaxKind.ExportDeclaration:case t.SyntaxKind.ImportDeclaration:{let w=K;if(w.moduleSpecifier&&t.isStringLiteral(w.moduleSpecifier)&&h.getSymbolAtLocation(w.moduleSpecifier)===b)return!0;break}case t.SyntaxKind.ImportEqualsDeclaration:{let w=K;if(Rt(w)&&h.getSymbolAtLocation(w.moduleReference.expression)===b)return!0;break}}return!1};e:for(let K of C)if(!y.has(S.fileName)&&F(K)){yield S,y.add(S.fileName),u&&u.add(S.fileName);break e}else if(s(K)){let w=K.body&&K.body.statements;if(w!==void 0){for(let Be of w)if(!y.has(S.fileName)&&F(Be)){yield S,y.add(S.fileName),u&&u.add(S.fileName);break e}}}}}}skipSourceFile(s,u){return s.isSourceFileDefaultLibrary(u)||s.isSourceFileFromExternalLibrary(u)||u.isDeclarationFile}*allSourceFiles(){this.preferredSourceFiles!==void 0&&(yield*this.preferredSourceFiles),yield*this.program.getSourceFiles()}}V.ReferencedByVisitor=_e;let _t;(f=>{let _=new Map([[t.SyntaxKind.Unknown,0],[t.SyntaxKind.EndOfFileToken,1],[t.SyntaxKind.SingleLineCommentTrivia,2],[t.SyntaxKind.MultiLineCommentTrivia,3],[t.SyntaxKind.NewLineTrivia,4],[t.SyntaxKind.WhitespaceTrivia,5],[t.SyntaxKind.ShebangTrivia,6],[t.SyntaxKind.ConflictMarkerTrivia,7],[t.SyntaxKind.NonTextFileMarkerTrivia,8],[t.SyntaxKind.NumericLiteral,9],[t.SyntaxKind.BigIntLiteral,10],[t.SyntaxKind.StringLiteral,11],[t.SyntaxKind.JsxText,12],[t.SyntaxKind.JsxTextAllWhiteSpaces,13],[t.SyntaxKind.RegularExpressionLiteral,14],[t.SyntaxKind.NoSubstitutionTemplateLiteral,15],[t.SyntaxKind.TemplateHead,16],[t.SyntaxKind.TemplateMiddle,17],[t.SyntaxKind.TemplateTail,18],[t.SyntaxKind.OpenBraceToken,19],[t.SyntaxKind.CloseBraceToken,20],[t.SyntaxKind.OpenParenToken,21],[t.SyntaxKind.CloseParenToken,22],[t.SyntaxKind.OpenBracketToken,23],[t.SyntaxKind.CloseBracketToken,24],[t.SyntaxKind.DotToken,25],[t.SyntaxKind.DotDotDotToken,26],[t.SyntaxKind.SemicolonToken,27],[t.SyntaxKind.CommaToken,28],[t.SyntaxKind.QuestionDotToken,29],[t.SyntaxKind.LessThanToken,30],[t.SyntaxKind.LessThanSlashToken,31],[t.SyntaxKind.GreaterThanToken,32],[t.SyntaxKind.LessThanEqualsToken,33],[t.SyntaxKind.GreaterThanEqualsToken,34],[t.SyntaxKind.EqualsEqualsToken,35],[t.SyntaxKind.ExclamationEqualsToken,36],[t.SyntaxKind.EqualsEqualsEqualsToken,37],[t.SyntaxKind.ExclamationEqualsEqualsToken,38],[t.SyntaxKind.EqualsGreaterThanToken,39],[t.SyntaxKind.PlusToken,40],[t.SyntaxKind.MinusToken,41],[t.SyntaxKind.AsteriskToken,42],[t.SyntaxKind.AsteriskAsteriskToken,43],[t.SyntaxKind.SlashToken,44],[t.SyntaxKind.PercentToken,45],[t.SyntaxKind.PlusPlusToken,46],[t.SyntaxKind.MinusMinusToken,47],[t.SyntaxKind.LessThanLessThanToken,48],[t.SyntaxKind.GreaterThanGreaterThanToken,49],[t.SyntaxKind.GreaterThanGreaterThanGreaterThanToken,50],[t.SyntaxKind.AmpersandToken,51],[t.SyntaxKind.BarToken,52],[t.SyntaxKind.CaretToken,53],[t.SyntaxKind.ExclamationToken,54],[t.SyntaxKind.TildeToken,55],[t.SyntaxKind.AmpersandAmpersandToken,56],[t.SyntaxKind.BarBarToken,57],[t.SyntaxKind.QuestionToken,58],[t.SyntaxKind.ColonToken,59],[t.SyntaxKind.AtToken,60],[t.SyntaxKind.QuestionQuestionToken,61],[t.SyntaxKind.BacktickToken,62],[t.SyntaxKind.HashToken,63],[t.SyntaxKind.EqualsToken,64],[t.SyntaxKind.PlusEqualsToken,65],[t.SyntaxKind.MinusEqualsToken,66],[t.SyntaxKind.AsteriskEqualsToken,67],[t.SyntaxKind.AsteriskAsteriskEqualsToken,68],[t.SyntaxKind.SlashEqualsToken,69],[t.SyntaxKind.PercentEqualsToken,70],[t.SyntaxKind.LessThanLessThanEqualsToken,71],[t.SyntaxKind.GreaterThanGreaterThanEqualsToken,72],[t.SyntaxKind.GreaterThanGreaterThanGreaterThanEqualsToken,73],[t.SyntaxKind.AmpersandEqualsToken,74],[t.SyntaxKind.BarEqualsToken,75],[t.SyntaxKind.BarBarEqualsToken,76],[t.SyntaxKind.AmpersandAmpersandEqualsToken,77],[t.SyntaxKind.QuestionQuestionEqualsToken,78],[t.SyntaxKind.CaretEqualsToken,79],[t.SyntaxKind.Identifier,80],[t.SyntaxKind.PrivateIdentifier,81],[t.SyntaxKind.BreakKeyword,83],[t.SyntaxKind.CaseKeyword,84],[t.SyntaxKind.CatchKeyword,85],[t.SyntaxKind.ClassKeyword,86],[t.SyntaxKind.ConstKeyword,87],[t.SyntaxKind.ContinueKeyword,88],[t.SyntaxKind.DebuggerKeyword,89],[t.SyntaxKind.DefaultKeyword,90],[t.SyntaxKind.DeleteKeyword,91],[t.SyntaxKind.DoKeyword,92],[t.SyntaxKind.ElseKeyword,93],[t.SyntaxKind.EnumKeyword,94],[t.SyntaxKind.ExportKeyword,95],[t.SyntaxKind.ExtendsKeyword,96],[t.SyntaxKind.FalseKeyword,97],[t.SyntaxKind.FinallyKeyword,98],[t.SyntaxKind.ForKeyword,99],[t.SyntaxKind.FunctionKeyword,100],[t.SyntaxKind.IfKeyword,101],[t.SyntaxKind.ImportKeyword,102],[t.SyntaxKind.InKeyword,103],[t.SyntaxKind.InstanceOfKeyword,104],[t.SyntaxKind.NewKeyword,105],[t.SyntaxKind.NullKeyword,106],[t.SyntaxKind.ReturnKeyword,107],[t.SyntaxKind.SuperKeyword,108],[t.SyntaxKind.SwitchKeyword,109],[t.SyntaxKind.ThisKeyword,110],[t.SyntaxKind.ThrowKeyword,111],[t.SyntaxKind.TrueKeyword,112],[t.SyntaxKind.TryKeyword,113],[t.SyntaxKind.TypeOfKeyword,114],[t.SyntaxKind.VarKeyword,115],[t.SyntaxKind.VoidKeyword,116],[t.SyntaxKind.WhileKeyword,117],[t.SyntaxKind.WithKeyword,118],[t.SyntaxKind.ImplementsKeyword,119],[t.SyntaxKind.InterfaceKeyword,120],[t.SyntaxKind.LetKeyword,121],[t.SyntaxKind.PackageKeyword,122],[t.SyntaxKind.PrivateKeyword,123],[t.SyntaxKind.ProtectedKeyword,124],[t.SyntaxKind.PublicKeyword,125],[t.SyntaxKind.StaticKeyword,126],[t.SyntaxKind.YieldKeyword,127],[t.SyntaxKind.AbstractKeyword,128],[t.SyntaxKind.AccessorKeyword,129],[t.SyntaxKind.AsKeyword,130],[t.SyntaxKind.AssertsKeyword,131],[t.SyntaxKind.AssertKeyword,132],[t.SyntaxKind.AnyKeyword,133],[t.SyntaxKind.AsyncKeyword,134],[t.SyntaxKind.AwaitKeyword,135],[t.SyntaxKind.BooleanKeyword,136],[t.SyntaxKind.ConstructorKeyword,137],[t.SyntaxKind.DeclareKeyword,138],[t.SyntaxKind.GetKeyword,139],[t.SyntaxKind.InferKeyword,140],[t.SyntaxKind.IntrinsicKeyword,141],[t.SyntaxKind.IsKeyword,142],[t.SyntaxKind.KeyOfKeyword,143],[t.SyntaxKind.ModuleKeyword,144],[t.SyntaxKind.NamespaceKeyword,145],[t.SyntaxKind.NeverKeyword,146],[t.SyntaxKind.OutKeyword,147],[t.SyntaxKind.ReadonlyKeyword,148],[t.SyntaxKind.RequireKeyword,149],[t.SyntaxKind.NumberKeyword,150],[t.SyntaxKind.ObjectKeyword,151],[t.SyntaxKind.SatisfiesKeyword,152],[t.SyntaxKind.SetKeyword,153],[t.SyntaxKind.StringKeyword,154],[t.SyntaxKind.SymbolKeyword,155],[t.SyntaxKind.TypeKeyword,156],[t.SyntaxKind.UndefinedKeyword,157],[t.SyntaxKind.UniqueKeyword,158],[t.SyntaxKind.UnknownKeyword,159],[t.SyntaxKind.UsingKeyword,160],[t.SyntaxKind.FromKeyword,161],[t.SyntaxKind.GlobalKeyword,162],[t.SyntaxKind.BigIntKeyword,163],[t.SyntaxKind.OverrideKeyword,164],[t.SyntaxKind.OfKeyword,165],[t.SyntaxKind.QualifiedName,166],[t.SyntaxKind.ComputedPropertyName,167],[t.SyntaxKind.TypeParameter,168],[t.SyntaxKind.Parameter,169],[t.SyntaxKind.Decorator,170],[t.SyntaxKind.PropertySignature,171],[t.SyntaxKind.PropertyDeclaration,172],[t.SyntaxKind.MethodSignature,173],[t.SyntaxKind.MethodDeclaration,174],[t.SyntaxKind.ClassStaticBlockDeclaration,175],[t.SyntaxKind.Constructor,176],[t.SyntaxKind.GetAccessor,177],[t.SyntaxKind.SetAccessor,178],[t.SyntaxKind.CallSignature,179],[t.SyntaxKind.ConstructSignature,180],[t.SyntaxKind.IndexSignature,181],[t.SyntaxKind.TypePredicate,182],[t.SyntaxKind.TypeReference,183],[t.SyntaxKind.FunctionType,184],[t.SyntaxKind.ConstructorType,185],[t.SyntaxKind.TypeQuery,186],[t.SyntaxKind.TypeLiteral,187],[t.SyntaxKind.ArrayType,188],[t.SyntaxKind.TupleType,189],[t.SyntaxKind.OptionalType,190],[t.SyntaxKind.RestType,191],[t.SyntaxKind.UnionType,192],[t.SyntaxKind.IntersectionType,193],[t.SyntaxKind.ConditionalType,194],[t.SyntaxKind.InferType,195],[t.SyntaxKind.ParenthesizedType,196],[t.SyntaxKind.ThisType,197],[t.SyntaxKind.TypeOperator,198],[t.SyntaxKind.IndexedAccessType,199],[t.SyntaxKind.MappedType,200],[t.SyntaxKind.LiteralType,201],[t.SyntaxKind.NamedTupleMember,202],[t.SyntaxKind.TemplateLiteralType,203],[t.SyntaxKind.TemplateLiteralTypeSpan,204],[t.SyntaxKind.ImportType,205],[t.SyntaxKind.ObjectBindingPattern,206],[t.SyntaxKind.ArrayBindingPattern,207],[t.SyntaxKind.BindingElement,208],[t.SyntaxKind.ArrayLiteralExpression,209],[t.SyntaxKind.ObjectLiteralExpression,210],[t.SyntaxKind.PropertyAccessExpression,211],[t.SyntaxKind.ElementAccessExpression,212],[t.SyntaxKind.CallExpression,213],[t.SyntaxKind.NewExpression,214],[t.SyntaxKind.TaggedTemplateExpression,215],[t.SyntaxKind.TypeAssertionExpression,216],[t.SyntaxKind.ParenthesizedExpression,217],[t.SyntaxKind.FunctionExpression,218],[t.SyntaxKind.ArrowFunction,219],[t.SyntaxKind.DeleteExpression,220],[t.SyntaxKind.TypeOfExpression,221],[t.SyntaxKind.VoidExpression,222],[t.SyntaxKind.AwaitExpression,223],[t.SyntaxKind.PrefixUnaryExpression,224],[t.SyntaxKind.PostfixUnaryExpression,225],[t.SyntaxKind.BinaryExpression,226],[t.SyntaxKind.ConditionalExpression,227],[t.SyntaxKind.TemplateExpression,228],[t.SyntaxKind.YieldExpression,229],[t.SyntaxKind.SpreadElement,230],[t.SyntaxKind.ClassExpression,231],[t.SyntaxKind.OmittedExpression,232],[t.SyntaxKind.ExpressionWithTypeArguments,233],[t.SyntaxKind.AsExpression,234],[t.SyntaxKind.NonNullExpression,235],[t.SyntaxKind.MetaProperty,236],[t.SyntaxKind.SyntheticExpression,237],[t.SyntaxKind.SatisfiesExpression,238],[t.SyntaxKind.TemplateSpan,239],[t.SyntaxKind.SemicolonClassElement,240],[t.SyntaxKind.Block,241],[t.SyntaxKind.EmptyStatement,242],[t.SyntaxKind.VariableStatement,243],[t.SyntaxKind.ExpressionStatement,244],[t.SyntaxKind.IfStatement,245],[t.SyntaxKind.DoStatement,246],[t.SyntaxKind.WhileStatement,247],[t.SyntaxKind.ForStatement,248],[t.SyntaxKind.ForInStatement,249],[t.SyntaxKind.ForOfStatement,250],[t.SyntaxKind.ContinueStatement,251],[t.SyntaxKind.BreakStatement,252],[t.SyntaxKind.ReturnStatement,253],[t.SyntaxKind.WithStatement,254],[t.SyntaxKind.SwitchStatement,255],[t.SyntaxKind.LabeledStatement,256],[t.SyntaxKind.ThrowStatement,257],[t.SyntaxKind.TryStatement,258],[t.SyntaxKind.DebuggerStatement,259],[t.SyntaxKind.VariableDeclaration,260],[t.SyntaxKind.VariableDeclarationList,261],[t.SyntaxKind.FunctionDeclaration,262],[t.SyntaxKind.ClassDeclaration,263],[t.SyntaxKind.InterfaceDeclaration,264],[t.SyntaxKind.TypeAliasDeclaration,265],[t.SyntaxKind.EnumDeclaration,266],[t.SyntaxKind.ModuleDeclaration,267],[t.SyntaxKind.ModuleBlock,268],[t.SyntaxKind.CaseBlock,269],[t.SyntaxKind.NamespaceExportDeclaration,270],[t.SyntaxKind.ImportEqualsDeclaration,271],[t.SyntaxKind.ImportDeclaration,272],[t.SyntaxKind.ImportClause,273],[t.SyntaxKind.NamespaceImport,274],[t.SyntaxKind.NamedImports,275],[t.SyntaxKind.ImportSpecifier,276],[t.SyntaxKind.ExportAssignment,277],[t.SyntaxKind.ExportDeclaration,278],[t.SyntaxKind.NamedExports,279],[t.SyntaxKind.NamespaceExport,280],[t.SyntaxKind.ExportSpecifier,281],[t.SyntaxKind.MissingDeclaration,282],[t.SyntaxKind.ExternalModuleReference,283],[t.SyntaxKind.JsxElement,284],[t.SyntaxKind.JsxSelfClosingElement,285],[t.SyntaxKind.JsxOpeningElement,286],[t.SyntaxKind.JsxClosingElement,287],[t.SyntaxKind.JsxFragment,288],[t.SyntaxKind.JsxOpeningFragment,289],[t.SyntaxKind.JsxClosingFragment,290],[t.SyntaxKind.JsxAttribute,291],[t.SyntaxKind.JsxAttributes,292],[t.SyntaxKind.JsxSpreadAttribute,293],[t.SyntaxKind.JsxExpression,294],[t.SyntaxKind.JsxNamespacedName,295],[t.SyntaxKind.CaseClause,296],[t.SyntaxKind.DefaultClause,297],[t.SyntaxKind.HeritageClause,298],[t.SyntaxKind.CatchClause,299],[t.SyntaxKind.ImportAttributes,300],[t.SyntaxKind.ImportAttribute,301],[t.SyntaxKind.PropertyAssignment,303],[t.SyntaxKind.ShorthandPropertyAssignment,304],[t.SyntaxKind.SpreadAssignment,305],[t.SyntaxKind.EnumMember,306],[t.SyntaxKind.SourceFile,307],[t.SyntaxKind.Bundle,308],[t.SyntaxKind.JSDocTypeExpression,309],[t.SyntaxKind.JSDocNameReference,310],[t.SyntaxKind.JSDocMemberName,311],[t.SyntaxKind.JSDocAllType,312],[t.SyntaxKind.JSDocUnknownType,313],[t.SyntaxKind.JSDocNullableType,314],[t.SyntaxKind.JSDocNonNullableType,315],[t.SyntaxKind.JSDocOptionalType,316],[t.SyntaxKind.JSDocFunctionType,317],[t.SyntaxKind.JSDocVariadicType,318],[t.SyntaxKind.JSDocNamepathType,319],[t.SyntaxKind.JSDoc,320],[t.SyntaxKind.JSDocText,321],[t.SyntaxKind.JSDocTypeLiteral,322],[t.SyntaxKind.JSDocSignature,323],[t.SyntaxKind.JSDocLink,324],[t.SyntaxKind.JSDocLinkCode,325],[t.SyntaxKind.JSDocLinkPlain,326],[t.SyntaxKind.JSDocTag,327],[t.SyntaxKind.JSDocAugmentsTag,328],[t.SyntaxKind.JSDocImplementsTag,329],[t.SyntaxKind.JSDocAuthorTag,330],[t.SyntaxKind.JSDocDeprecatedTag,331],[t.SyntaxKind.JSDocClassTag,332],[t.SyntaxKind.JSDocPublicTag,333],[t.SyntaxKind.JSDocPrivateTag,334],[t.SyntaxKind.JSDocProtectedTag,335],[t.SyntaxKind.JSDocReadonlyTag,336],[t.SyntaxKind.JSDocOverrideTag,337],[t.SyntaxKind.JSDocCallbackTag,338],[t.SyntaxKind.JSDocOverloadTag,339],[t.SyntaxKind.JSDocEnumTag,340],[t.SyntaxKind.JSDocParameterTag,341],[t.SyntaxKind.JSDocReturnTag,342],[t.SyntaxKind.JSDocThisTag,343],[t.SyntaxKind.JSDocTypeTag,344],[t.SyntaxKind.JSDocTemplateTag,345],[t.SyntaxKind.JSDocTypedefTag,346],[t.SyntaxKind.JSDocSeeTag,347],[t.SyntaxKind.JSDocPropertyTag,348],[t.SyntaxKind.JSDocThrowsTag,349],[t.SyntaxKind.JSDocSatisfiesTag,350],[t.SyntaxKind.JSDocImportTag,351],[t.SyntaxKind.SyntaxList,352],[t.SyntaxKind.NotEmittedStatement,353],[t.SyntaxKind.PartiallyEmittedExpression,354],[t.SyntaxKind.CommaListExpression,355],[t.SyntaxKind.SyntheticReferenceExpression,356]]),s=9999;function u(h){let b=[];for(;h!==void 0;)b.push(_.get(h.kind)??s),h=h.parent;return b}f.getPath=u})(_t=V.StableSyntaxKinds||={})})(gt||={});xt.exports=gt});var Oe,He,me,Ct=q(()=>{"use strict";Oe=class{[Symbol.toStringTag]="LinkedMap";_map;_head;_tail;_size;_state;constructor(){this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,n=0){let i=this._map.get(e);if(i)return n!==0&&this.touch(i,n),i.value}set(e,n,i=0){let r=this._map.get(e);if(r)r.value=n,i!==0&&this.touch(r,i);else{switch(r={key:e,value:n,next:void 0,previous:void 0},i){case 0:this.addItemLast(r);break;case 1:this.addItemFirst(r);break;case 2:this.addItemLast(r);break;default:this.addItemLast(r);break}this._map.set(e,r),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let n=this._map.get(e);if(n)return this._map.delete(e),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,n){let i=this._state,r=this._head;for(;r;){if(n?e.bind(n)(r.value,r.key,this):e(r.value,r.key,this),this._state!==i)throw new Error("LinkedMap got modified during iteration.");r=r.next}}keys(){let e=this,n=this._state,i=this._head,r={[Symbol.iterator](){return r},next(){if(e._state!==n)throw new Error("LinkedMap got modified during iteration.");if(i){let o={value:i.key,done:!1};return i=i.next,o}else return{value:void 0,done:!0}}};return r}values(){let e=this,n=this._state,i=this._head,r={[Symbol.iterator](){return r},next(){if(e._state!==n)throw new Error("LinkedMap got modified during iteration.");if(i){let o={value:i.value,done:!1};return i=i.next,o}else return{value:void 0,done:!0}}};return r}entries(){let e=this,n=this._state,i=this._head,r={[Symbol.iterator](){return r},next(){if(e._state!==n)throw new Error("LinkedMap got modified during iteration.");if(i){let o={value:[i.key,i.value],done:!1};return i=i.next,o}else return{value:void 0,done:!0}}};return r}[Symbol.iterator](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let n=this._head,i=this.size;for(;n&&i>e;)this._map.delete(n.key),n=n.next,i--;this._head=n,this._size=i,n&&(n.previous=void 0),this._state++}trimNew(e){if(e>=this.size)return;if(e===0){this.clear();return}let n=this._tail,i=this.size;for(;n&&i>e;)this._map.delete(n.key),n=n.previous,i--;this._tail=n,this._size=i,n&&(n.next=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let n=e.next,i=e.previous;if(!n||!i)throw new Error("Invalid list");n.previous=i,i.next=n}e.next=void 0,e.previous=void 0,this._state++}touch(e,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==1&&n!==2)){if(n===1){if(e===this._head)return;let i=e.next,r=e.previous;e===this._tail?(r.next=void 0,this._tail=r):(i.previous=r,r.next=i),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(n===2){if(e===this._tail)return;let i=e.next,r=e.previous;e===this._head?(i.previous=void 0,this._head=i):(i.previous=r,r.next=i),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((n,i)=>{e.push([i,n])}),e}fromJSON(e){this.clear();for(let[n,i]of e)this.set(n,i)}},He=class extends Oe{_limit;_ratio;constructor(e,n=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,n=2){return super.get(e,n)}peek(e){return super.get(e,0)}set(e,n){return super.set(e,n,2),this}checkTrim(){this.size>this._limit&&this.trim(Math.round(this._limit*this._ratio))}},me=class extends He{constructor(e,n=1){super(e,n)}trim(e){this.trimOld(e)}set(e,n){return super.set(e,n),this.checkTrim(),this}}});var E,Se,N,re,he,J,ze,Ue,be,ge,Ge,z,O,oe,xe,$=q(()=>{"use strict";H();U();E=Q(W());Ct();Se=A(),N=class extends Error{static SourceFileNotFound=1;static NodeNotFound=2;static NodeKindMismatch=3;static SymbolNotFound=4;static NoDeclaration=5;code;constructor(e,n){super(e),this.code=n}},re=class{getSymbolInfo(e,n=!1){let i=e.declarations;if(i===void 0||i.length===0)return{skip:!0};let r,o=0,d=this.getProgram();for(let l of i){let c=l.getSourceFile();r===void 0&&(r=c),(d.isSourceFileDefaultLibrary(c)||n&&d.isSourceFileFromExternalLibrary(c))&&o++}return o===i.length?{skip:!0}:{skip:!1,primary:r}}skipDeclaration(e,n=e.getSourceFile()){let i=this.getProgram();return i.isSourceFileDefaultLibrary(n)||i.isSourceFileFromExternalLibrary(n)||n.isDeclarationFile}},he=class{referencedByContext;seenSymbols;neighborFiles;constructor(e){this.referencedByContext=void 0,this.seenSymbols=new Map,this.neighborFiles=e}getReferencedByContext(e=!1){return this.referencedByContext===void 0?this.referencedByContext=new E.ReferencedByContext(e):e&&this.referencedByContext.ensureCache(),this.referencedByContext}getSeenSymbols(e,n){let i=this.seenSymbols.get(n);return i===void 0&&(i=new Ge(e),this.seenSymbols.set(n,i)),i}getPreferredNeighborFiles(e){let n=[];for(let i of this.neighborFiles){let r=e.getSourceFile(i);r!==void 0&&n.push(r)}return n}},J=class extends re{program;symbols;constructor(e,n=new E.Symbols(e)){if(super(),e!==n.getProgram())throw new Error("Program and symbols program must match");this.program=e,this.symbols=n}getSymbols(){return this.symbols}getProgram(){return this.program}getHeritageSymbol(e){let n=this.symbols.getSymbolAtLocation(e);if(n===void 0)return;E.Symbols.isAlias(n)&&(n=this.symbols.getAliasedSymbol(n));let i=0;for(;E.Symbols.isTypeAlias(n)&&i<10;){let r=n.declarations;if(r!==void 0){let o=n;for(let d of r)if(Se.isTypeAliasDeclaration(d)){let l=d.type;Se.isTypeReferenceNode(l)&&(n=this.symbols.getLeafSymbolAtLocation(l.typeName))}if(o===n)break}i++}return n}static getNodeInProgram(e,n){function i(c,p){if(c===void 0||p===void 0)return c===p;for(;c!==void 0&&p!==void 0;){if(c.kind!==p.kind||c.pos!==p.pos||c.end!==p.end)return!1;c=c.parent,p=p.parent}return c===void 0&&p===void 0}let r=n.getSourceFile().fileName,o=e.getSourceFile(r);if(o===void 0)throw new N(`No source file found for ${r}`,N.SourceFileNotFound);let d=E.default.getTokenAtPosition(o,n.pos),l=d;if(l===void 0)throw new N(`No node found for ${r}:${n.pos}`,N.NodeNotFound);for(;l!==void 0;){if(n.pos===l.pos&&n.end===l.end&&n.kind===l.kind&&i(n.parent,l.parent))return l;l=l.parent}throw new N(`Found node ${d.kind} for node ${n.kind} in file ${r}:${n.pos}`,N.NodeKindMismatch)}},ze=class{info(){}msg(){}startGroup(){}endGroup(){}},Ue=class{host;codeCache;supportsCaching;symbols;constructor(e,n){this.host=e,this.codeCache=new me(100),this.supportsCaching=n,this.symbols=new Map}reconcile(){this.symbols.clear()}getSymbols(e){let n=this.symbols.get(e);return n===void 0&&(n=new E.Symbols(e),this.symbols.set(e,n)),n}run(e,n,i){let r=this.getPossiblePrograms(e,n);for(let o of r){let l=e.with(o).run(n,i);if(l!==void 0)return[o,l]}return[void 0,void 0]}getPossiblePrograms(e,n){let i=[];for(let r of this.getLanguageServices()){let o=r.getProgram();if(o===void 0)continue;let d=e.score(o,n);d>0&&i.push([d,o])}return i.sort((r,o)=>o[0]-r[0]).map(r=>r[1])}getCachedCode(e,n){if(this.supportsCaching){if(typeof e=="string")return this.codeCache.get(e);{let i=E.Symbols.createVersionedKey(n,this,this.host);return i===void 0?void 0:this.codeCache.get(i)}}}cacheCode(e,n){if(this.supportsCaching)if(typeof e=="string")this.codeCache.set(e,n);else{let i=E.Symbols.createVersionedKey(e,this,this.host);i!==void 0&&this.codeCache.set(i,n)}}},be=class extends Ue{session;logger;constructor(e,n){super(n,!0),this.session=e;let i=E.Sessions.getProjectService(this.session);this.logger=i?.logger??new ze}logError(e,n){this.session.logError(e,n)}getFileAndProject(e){return E.Sessions.getFileAndProject(this.session,e)}getPositionInFile(e,n){return E.Sessions.getPositionInFile(this.session,e,n)}*getLanguageServices(e){let n=E.Sessions.getProjectService(this.session);if(n!==void 0)if(e===void 0){for(let i of n.configuredProjects.values())yield i.getLanguageService();for(let i of n.inferredProjects)yield i.getLanguageService();for(let i of n.externalProjects)yield i.getLanguageService()}else{let i=Se.server.toNormalizedPath(e.fileName),r=n.getScriptInfoForNormalizedPath(i);yield*r?r.containingProjects.map(o=>o.getLanguageService()):[]}}getScriptVersion(e){let n=Se.server.toNormalizedPath(e.fileName),i=E.Sessions.getProjectService(this.session);return i===void 0?void 0:i.getScriptInfoForNormalizedPath(n)?.getLatestVersion()}},ge=class{tokenBudget;_metaItems=[];_items;constructor(e){this.tokenBudget=e,this._metaItems=[],this._items=[]}get items(){let e=this._metaItems.slice();this._items.sort((n,i)=>i.priority-n.priority);for(let n of this._items){let i=0;switch(n.kind){case"trait":i=ye.sizeInChars(n);break;case"snippet":i=ie.sizeInChars(n);break;case"relatedFile":break}e.push(n),this.tokenBudget.spent(i)}return e}addMetaData(e,n){this._metaItems.push(Je.create(e,n))}addErrorData(e){this._metaItems.push(je.create(e.code,e.message))}addTrait(e,n,i,r){this._items.push(ye.create(e,n,i,r))}addSnippet(e,n,i){if(e.isEmpty())return;let r=e.snippet(n,i);this._items.push(r)}},Ge=class{session;symbols=new Set;keys=new Set;constructor(e,n){this.session=e,this.symbols=new Set,this.keys=n?.keys??new Set}add(e){this.symbols.add(e);let n=E.Symbols.createKey(e,this.session.host);n!==void 0&&this.keys.add(n)}has(e){if(this.symbols.has(e))return!0;let n=E.Symbols.createKey(e,this.session.host);return n===void 0?!1:this.keys.has(n)?(this.symbols.add(e),!0):!1}manages(e){return this.has(e)?!0:(this.add(e),!1)}},z=class{languageService;session;symbols;cost;constructor(e,n,i){this.languageService=n,this.session=e,this.symbols=e.getSymbols(this.getProgram()),this.cost=i}getProgram(){let e=this.languageService.getProgram();if(e===void 0)throw new Error("No program available");return e}},O=class{contextKind;symbolsToQuery;constructor(e,n){this.contextKind=e,this.symbolsToQuery=n}},oe=class extends Error{constructor(){super("Budget exhausted")}},xe=class{charBudget;constructor(e){this.charBudget=e*4}spent(e){this.charBudget-=e}isExhausted(){return this.charBudget<=0}throwIfExhausted(){if(this.charBudget<=0)throw new oe}spentAndThrowIfExhausted(e){this.spent(e),this.throwIfExhausted()}}});var k,M,te,ne,se,Ce,Te,Qe,We,$e,Ye,L,ae=q(()=>{"use strict";H();$();U();k=Q(W()),M=A();(r=>{function a(o,d){d??=o.getSourceFile();let l=o.getStart(d,!0),c=d.getLineAndCharacterOfPosition(l),m=d.text.substring(l,o.getEnd()).split(/\r?\n/g);if(c.character>0){let g=d.getPositionOfLineAndCharacter(c.line,0),I=d.text.substring(g,l);n(m,I)}return i(m),m}r.getLines=a;function e(o){let d=o.getFullText(),l=M.getLeadingCommentRanges(d,0);if(l!==void 0&&l.length>0){let c=l.at(-1).pos,p=l.at(-1).end,g=d.substring(c,p).trim().split(/\r?\n/);if(i(g),g.length>1){let P=g[1].match(/^\s+/);P!==null&&n(g,P[0])}return g}}r.getDocumentation=e;function n(o,d,l=1){let c=!0;for(let p=l;p<o.length;p++)if(!o[p].startsWith(d)){c=!1;break}if(c)for(let p=l;p<o.length;p++)o[p]=o[p].substring(d.length)}function i(o){for(;o.length>0&&o[0].trim()==="";)o.shift();for(;o.length>0&&o.at(-1).trim()==="";)o.pop()}})(te||={});ne=class{session;indent;lines;source;additionalSources;constructor(e,n,i=0){this.session=e,this.indent=i,this.source=n.fileName,this.lines=[],this.additionalSources=new Set}makeKey(e){if(Array.isArray(e)){let n=[];for(let i of e){let r=k.Symbols.createVersionedKey(i,this.session,this.session.host);if(r!==void 0)n.push(r);else{n=void 0;break}}return n===void 0?void 0:n.join(";")}else return k.Symbols.createVersionedKey(e,this.session,this.session.host)}getAdditionalSources(){return this.additionalSources.delete(this.source),this.additionalSources}increaseIndent(){this.indent++}decreaseIndent(){this.indent--}addPropertyDeclaration(e){this.lines.push(...te.getLines(e))}addMethodDeclaration(e){let n=te.getDocumentation(e);n!==void 0&&this.lines.push(...n);let i=[];i.push("	".repeat(this.indent)),e.modifiers!==void 0&&(i.push(e.modifiers.map(r=>r.getText()).join(" ")),i.push(" ")),i.push(e.name.getText()),e.typeParameters!==void 0&&(i.push("<"),i.push(e.typeParameters.map(r=>r.getText()).join(", ")),i.push(">")),i.push("("),e.parameters!==void 0&&i.push(e.parameters.map(r=>r.getText()).join(", ")),i.push(")"),e.type!==void 0&&(i.push(": "),i.push(e.type.getText())),i.push(";"),this.lines.push(i.join(""))}addFunctionDeclaration(e,n,i){n??=e.name?.getText()??"";let r=te.getDocumentation(e);r!==void 0&&this.lines.push(...r);let o=[];o.push("	".repeat(this.indent)),o.push(this.getModifiers(e.modifiers,i)),o.push(" function "),o.push(n),o.push(this.getTypeParameters(e.typeParameters)),o.push("("),o.push(this.getParameters(e.parameters)),o.push(")"),o.push(this.getReturnTypes(e)),o.push(";"),this.lines.push(o.join(""))}getModifiers(e,n){if(e===void 0)return"";let i=[];n!==void 0&&i.push(n);for(let r of e)r.kind===M.SyntaxKind.AsyncKeyword||r.kind===M.SyntaxKind.DeclareKeyword||r.kind===M.SyntaxKind.ExportKeyword||i.push(r.getText());return i.join(" ")}getTypeParameters(e){if(e===void 0)return"";let n=[];return n.push("<"),n.push(e.map(i=>i.getText()).join(", ")),n.push(">"),n.join("")}getParameters(e){return e===void 0?"":e.map(n=>n.getText()).join(", ")}getReturnTypes(e){return e.type===void 0?"":`: ${e.type.getText()}`}},se=class extends ne{type;name;constructor(e,n,i,r){super(e,n),this.type=i,this.name=r}processMembers(e){for(let[n,i]of e)this.processMember(i)}processMember(e){let n=e.declarations;if(n!==void 0){if(k.Symbols.isProperty(e)){let i=n[0];(M.isPropertyDeclaration(i)||M.isPropertySignature(i))&&this.addPropertyDeclaration(i)}else if(k.Symbols.isMethod(e))for(let i of n)(M.isMethodDeclaration(i)||M.isMethodSignature(i))&&this.addMethodDeclaration(i)}}},Ce=class extends se{superClasses;includePrivates;key;constructor(e,n,i,r,o,d,l){super(e,i,r,o),this.includePrivates=l,this.key=void 0,d?(this.superClasses=new Array(...n.getAllSuperClasses(r)),this.key=this.makeKey([r,...this.superClasses])):(this.key=this.makeKey(r),this.superClasses=void 0)}emit(){if(this.lines.push(`declare class${this.getTypeParameters()} ${this.name} {`),this.increaseIndent(),this.superClasses!==void 0)for(let e=this.superClasses.length-1;e>=0;e--){let n=this.superClasses[e];n.members!==void 0&&(k.Symbols.fillSources(this.additionalSources,n),this.processMembers(n.members))}this.type.members!==void 0&&(k.Symbols.fillSources(this.additionalSources,this.type),this.processMembers(this.type.members)),this.decreaseIndent(),this.lines.push("}")}processMember(e){!this.includePrivates&&k.Symbols.isPrivate(e)||super.processMember(e)}getTypeParameters(){let e=this.type.declarations;if(e===void 0||e.length===0)return"";let n=e[0];return M.isClassDeclaration(n)&&n.typeParameters!==void 0?super.getTypeParameters(n.typeParameters):""}},Te=class extends se{superTypes;key;constructor(e,n,i,r,o){super(e,i,r,o),this.superTypes=new Array(...n.getAllSuperTypes(r)).filter(d=>k.Symbols.isInterface(d)),this.key=this.makeKey(this.superTypes)}emit(){this.lines.push(`interface ${this.name} {`),this.increaseIndent();for(let e=this.superTypes.length-1;e>=0;e--){let n=this.superTypes[e];n.members!==void 0&&(k.Symbols.fillSources(this.additionalSources,n),this.processMembers(n.members))}this.type.members!==void 0&&(k.Symbols.fillSources(this.additionalSources,this.type),this.processMembers(this.type.members)),this.decreaseIndent(),this.lines.push("}")}},Qe=class extends ne{type;name;key;constructor(e,n,i,r){super(e,n),this.type=i,this.name=r,this.key=this.makeKey(i)}emit(){if(this.lines.push(`${k.Symbols.isConstEnum(this.type)?"const ":""}enum ${this.name} {`),this.increaseIndent(),this.type.exports!==void 0){let e=0,n=this.type.exports.size-1;for(let[i,r]of this.type.exports){let o=r.declarations;if(o===void 0)continue;let d=o[0];if(M.isEnumMember(d)){let l=te.getLines(d);e<n&&(l[l.length-1]+=","),this.lines.push(...l)}e++}}this.decreaseIndent(),this.lines.push("}")}},We=class extends se{key;constructor(e,n,i,r){super(e,n,i,r)}emit(){this.lines.push(`type ${this.name} = {`),this.increaseIndent(),this.type.members!==void 0&&this.processMembers(this.type.members),this.decreaseIndent(),this.lines.push("}")}},$e=class extends ne{func;name;constructor(e,n,i,r){super(e,n),this.func=i,this.name=r??i.getName()}get key(){}emit(e){let n=this.func.declarations;if(n!==void 0)for(let i of n){let r=i.getSourceFile().fileName;r!==e.fileName&&M.isFunctionDeclaration(i)&&(this.addFunctionDeclaration(i,this.name,"declare"),this.additionalSources.add(r))}}},Ye=class extends ne{module;name;constructor(e,n,i,r){super(e,n),this.module=i,this.name=r??i.getName()}get key(){}emit(e){this.lines.push(`declare namespace ${this.name} {`),this.increaseIndent();let n=this.module.exports;n!==void 0&&this.addExports(n,e),this.decreaseIndent(),this.lines.push("}")}addExports(e,n){for(let[i,r]of e){let o=r.declarations;if(o!==void 0&&k.Symbols.isFunction(r))for(let d of o){let l=d.getSourceFile().fileName;l!==n.fileName&&M.isFunctionDeclaration(d)&&(this.addFunctionDeclaration(d,this.name,"declare"),this.additionalSources.add(l))}}}},L=class extends re{lines;source;additionalSources;indent=0;session;symbols;currentSourceFile;seen;constructor(e,n,i,r){super(),this.lines=[],this.source=void 0,this.additionalSources=new Set,this.session=e,this.symbols=n,this.currentSourceFile=i,this.seen=r}increaseIndent(){this.indent++}decreaseIndent(){this.indent--}getProgram(){return this.symbols.getProgram()}addSource(e){this.source===void 0?this.source=e:this.additionalSources.add(e)}addAdditionalSource(e){if(e!==void 0)for(let n of e)this.additionalSources.add(n)}isEmpty(){return this.lines.length===0||this.source===void 0}snippet(e,n){if(this.source===void 0)throw new Error("No source");return this.additionalSources.delete(this.source),ie.create(this.source,this.additionalSources.size===0?void 0:[...this.additionalSources],this.lines.join(`
`),e,n)}addDeclaration(e){let n=e.getSourceFile();if(n.fileName===this.currentSourceFile.fileName||this.skipDeclaration(e,n))return;let i=te.getLines(e,n);this.indent===0?this.lines.push(...i):this.lines.push(...i.map(r=>`${"	".repeat(this.indent)}${r})`)),this.addSource(n.fileName)}addClassSymbol(e,n,i,r){if(!k.Symbols.isClass(e)||this.seen.manages(e))return;let o=this.getSymbolInfo(e);o.skip||this.addEmitter(new Ce(this.session,this.symbols,o.primary,e,n,i,r))}addInterfaceSymbol(e,n){if(!k.Symbols.isInterface(e)||this.seen.manages(e))return;let i=this.getSymbolInfo(e);i.skip||this.addEmitter(new Te(this.session,this.symbols,i.primary,e,n))}addTypeAliasSymbol(e,n){if(!k.Symbols.isTypeAlias(e)||this.seen.manages(e))return;let i=this.getTypeToEmit(e);if(i===void 0)return;let r=this.getSymbolInfo(i);if(r.skip)return;let o=r.primary;k.Symbols.isClass(i)?this.addEmitter(new Ce(this.session,this.symbols,o,i,n,!0,!1)):k.Symbols.isInterface(i)?this.addEmitter(new Te(this.session,this.symbols,o,i,n)):k.Symbols.isTypeLiteral(i)&&this.addEmitter(new We(this.session,o,i,n))}addEnumSymbol(e,n){if(!k.Symbols.isEnum(e)||this.seen.manages(e))return;let i=this.getSymbolInfo(e);i.skip||this.addEmitter(new Qe(this.session,i.primary,e,n))}addFunctionSymbol(e,n){if(!k.Symbols.isFunction(e)||this.seen.manages(e))return;let i=this.getSymbolInfo(e);i.skip||this.addEmitter(new $e(this.session,i.primary,e,n))}addModuleSymbol(e,n){if(!k.Symbols.isValueModule(e)||this.seen.manages(e))return;let i=this.getSymbolInfo(e);i.skip||this.addEmitter(new Ye(this.session,i.primary,e,n))}addEmitter(e){let n,i,r;if(e.key!==void 0){let o=this.session.getCachedCode(e.key);o!==void 0&&(n=o.value,i=o.uri,r=o.additionalUris)}(n===void 0||i===void 0)&&(e.emit(this.currentSourceFile),n=e.lines,i=e.source,r=e.getAdditionalSources(),e.key!==void 0&&this.session.cacheCode(e.key,{value:n,uri:i,additionalUris:r})),this.indent===0?this.lines.push(...n):this.lines.push(...n.map(o=>`${"	".repeat(this.indent)}${o}`)),this.addSource(i),this.addAdditionalSource(r)}getTypeToEmit(e){if(!k.Symbols.isTypeAlias(e))return;let n=e.declarations;if(n!==void 0){for(let i of n)if(M.isTypeAliasDeclaration(i)){let r=i.type;if(M.isTypeLiteralNode(r)){let o=this.symbols.getSymbolAtLocation(r);if(k.Symbols.isTypeLiteral(o))return o}else if(M.isTypeReferenceNode(r)){let o=this.symbols.getLeafSymbolAtLocation(r.typeName);if(k.Symbols.isInterface(o)||k.Symbols.isTypeLiteral(o)||k.Symbols.isTypeLiteral(o))return o}}}}}});var Y,Z,Xe,Ke,Ze,ve,et,Tt=q(()=>{"use strict";H();ae();$();U();Y=Q(W()),Z=A(),Xe=class a extends J{classDeclaration;abstractMembers;extends;implements;constructor(e,n,i){if(super(e,n),i instanceof a){let r=i;this.classDeclaration=J.getNodeInProgram(e,r.classDeclaration),this.abstractMembers=r.abstractMembers;let o=d=>{let l=d.type,c=e.getSourceFile(l.getSourceFile().fileName);if(c!==void 0){let p=Y.default.getTokenAtPosition(c,l.pos);if(Z.isExpressionWithTypeArguments(p)){let m=n.getSymbolAtLocation(p.expression);if(m!==void 0&&!this.getSymbolInfo(m).skip)return{symbol:m,type:p,abstractMembers:d.abstractMembers}}}};if(r.extends!==void 0&&(this.extends=o(r.extends)),r.implements!==void 0){let d;for(let l of r.implements){let c=o(l);c!==void 0&&(d=d??[],d.push(c))}this.implements=d}}else{let r=i;this.classDeclaration=r;let o=r.heritageClauses;if(o===void 0){this.abstractMembers=0,this.extends=void 0,this.implements=void 0;return}let d=0,l,c;for(let p of o)if(p.token===Z.SyntaxKind.ExtendsKeyword){if(p.types.length===1){let m=p.types[0],g=this.getHeritageSymbol(m.expression);if(g!==void 0&&!this.getSymbolInfo(g).skip){let I=this.getNumberOfAbstractMembers(g);d+=I,l={symbol:g,type:m,abstractMembers:I}}}}else if(p.token===Z.SyntaxKind.ImplementsKeyword)for(let m of p.types){let g=this.getHeritageSymbol(m.expression);if(g!==void 0&&!this.getSymbolInfo(g).skip){c=c??[];let I=this.getNumberOfAbstractMembers(g);d+=I,c.push({symbol:g,type:m,abstractMembers:I})}}c!==void 0&&c.sort((p,m)=>m.abstractMembers-p.abstractMembers),this.abstractMembers=d,this.extends=l,this.implements=c}}with(e){return e===this.program?this:new a(e,new Y.Symbols(e),this)}*all(){this.extends!==void 0&&(yield this.extends),this.implements!==void 0&&(yield*this.implements)}isSame(e){return this.classDeclaration===e||this.classDeclaration.getSourceFile().fileName===e.getSourceFile().fileName&&this.classDeclaration.pos===e.pos}score(e,n){if(this.abstractMembers===0){if(this.extends===void 0)return-1;let l=this.extends.symbol.declarations;if(l===void 0)return-1;for(let c of l)if(e.getSourceFile(c.getSourceFile().fileName)===void 0)return-1;return 1}let i;for(let l of this.all())if(l.symbol.declarations!==void 0)for(let c of l.symbol.declarations){let p=c.getSourceFile();if(e.getSourceFile(p.fileName)!==void 0){i??=0,i+=l.abstractMembers;break}}if(i===void 0)return-1;let r=i/this.abstractMembers,o=n.neighborFiles;if(o.length===0)return r;let d=Math.pow(10,o.length.toString().length);r*=d;for(let l of o)e.getSourceFile(l)!==void 0&&(r+=1);return r}run(e,n){if(this.extends===void 0&&this.implements===void 0)return;let i,r=new Map([...this.all()].map(o=>[o.symbol,o]));for(let o of this.all()){let l=o.symbol.declarations;if(l===void 0)continue;let c=new Set;for(let p of l){if(!Z.isClassDeclaration(p)&&!Z.isInterfaceDeclaration(p)&&!Z.isTypeAliasDeclaration(p)||p.name===void 0)continue;let m=p.getSourceFile();if(c.has(m.fileName))continue;let g=new Y.ReferencedByVisitor(this.program,m,e.getPreferredNeighborFiles(this.program),e.getReferencedByContext());for(let I of g.entries()){n.throwIfCancellationRequested();for(let P of Y.ClassDeclarations.entries(I)){if(P.heritageClauses===void 0||this.isSame(P))continue;let B;for(let G of P.heritageClauses)for(let j of G.types){let T=this.getHeritageSymbol(j.expression);if(T===void 0)continue;let pe=r.get(T);pe!==void 0&&(B??=0,B+=pe.abstractMembers)}if(B!==void 0&&(i===void 0?i={declaration:P,matchesAbstractMembers:B}:B>i.matchesAbstractMembers&&(i={declaration:P,matchesAbstractMembers:B})),i!==void 0&&i.matchesAbstractMembers===this.abstractMembers)return i}}}}}getNumberOfAbstractMembers(e){return this.symbols.getMemberStatistic(e).abstract.size}},Ke=class extends z{classDeclaration;constructor(e,n,i){super(e,n,2),this.classDeclaration=i}compute(e,n,i){i.throwIfCancellationRequested();let r=this.symbols,o=r.getSymbolAtLocation(this.classDeclaration.name??this.classDeclaration);if(o===void 0||!Y.Symbols.isClass(o)||o.declarations===void 0)return;let d=n.getSeenSymbols(this.session,this.getProgram()),l=this.classDeclaration.getSourceFile(),[c,p]=r.getExtendsSymbol(o);if(c!==void 0&&p!==void 0){let m=new L(this.session,r,l,d);m.addClassSymbol(c,p,!0,!1),e.addSnippet(m,"superClass",.9),d.add(c)}}},Ze=class extends z{classDeclaration;constructor(e,n,i){super(e,n,3),this.classDeclaration=i}compute(e,n,i){i.throwIfCancellationRequested();let r=this.getProgram(),o=this.classDeclaration,d=new Xe(r,this.symbols,o);if(d.extends===void 0&&d.implements===void 0)return;let[l,c]=this.session.run(d,n,i);if(l===void 0||c===void 0)return;let p=new L(this.session,this.session.getSymbols(l),o.getSourceFile(),n.getSeenSymbols(this.session,l));p.addDeclaration(c.declaration),e.addSnippet(p,"blueprint",1)}},ve=class a extends O{static create(e){return e.members===void 0||e.members.length===0?new et(e):new a(e)}classDeclaration;constructor(e){super("class"),this.classDeclaration=e}provide(e,n,i,r){r.throwIfCancellationRequested(),e.push(new Ke(n,i,this.classDeclaration))}},et=class extends O{classDeclaration;constructor(e){super("wholeClass",Z.SymbolFlags.Function),this.classDeclaration=e}provide(e,n,i,r){r.throwIfCancellationRequested(),e.push(new Ke(n,i,this.classDeclaration),new Ze(n,i,this.classDeclaration))}}});var X,ee,it=q(()=>{"use strict";ae();$();U();X=Q(W()),ee=class extends z{declaration;sourceFile;priority;constructor(e,n,i,r){super(e,n,1),this.declaration=i,this.sourceFile=i.getSourceFile(),this.priority=r}compute(e,n,i){let r=this.symbols,o=n.getSeenSymbols(this.session,this.getProgram());for(let l of this.declaration.parameters){i.throwIfCancellationRequested();let c=l.type;if(c===void 0)continue;let p=r.getSymbolAtTypeNodeLocation(c);p===void 0||o.has(p)||this.processSymbol(e,p,X.default.Node.getTypeName(c)??p.getName(),this.priority,o)}let d=this.declaration.type;if(d!==void 0){i.throwIfCancellationRequested();let l=r.getSymbolAtTypeNodeLocation(d);l!==void 0&&!o.has(l)&&this.processSymbol(e,l,X.default.Node.getTypeName(d)??l.getName(),this.priority,o)}}processSymbol(e,n,i,r,o){let d=this.symbols;if(X.Symbols.isClass(n)){let l=new L(this.session,d,this.sourceFile,o);l.addClassSymbol(n,i,!0,!1),e.addSnippet(l,"signature",r)}else if(X.Symbols.isInterface(n)){let l=new L(this.session,d,this.sourceFile,o);l.addInterfaceSymbol(n,i),e.addSnippet(l,"signature",r)}else if(X.Symbols.isTypeAlias(n)){let l=new L(this.session,d,this.sourceFile,o);l.addTypeAliasSymbol(n,i),e.addSnippet(l,"signature",r)}else if(X.Symbols.isEnum(n)){let l=new L(this.session,d,this.sourceFile,o);l.addEnumSymbol(n,i),e.addSnippet(l,"signature",r)}}}});var Kt,ke,vt=q(()=>{"use strict";H();$();it();U();Kt=A(),ke=class extends O{functionDeclaration;constructor(e){super("function",Kt.SymbolFlags.Function|Kt.SymbolFlags.ValueModule),this.functionDeclaration=e}provide(e,n,i,r){e.push(new ee(n,i,this.functionDeclaration,1))}}});var v,R,we,le,Ie,rt,ot,st,De,at,Pe,lt,dt,Ae,Ft=q(()=>{"use strict";H();ae();$();it();U();v=Q(W()),R=A(),we=class extends J{declaration;constructor(e,n,i){super(e,n),this.declaration=i}isSame(e){return this.declaration===e||this.declaration.getSourceFile().fileName===e.getSourceFile().fileName&&this.declaration.pos===e.pos}score(e,n){if(e.getSourceFile(this.declaration.getSourceFile().fileName)===void 0)return 0;let i=n.neighborFiles;if(i.length===0)return 1;let r=Math.pow(10,i.length.toString().length);for(let o of i)e.getSourceFile(o)!==void 0&&(r+=1);return r}},le=class extends we{constructor(e,n,i){super(e,n,i)}static create(e,n,i){let r=i.parent;if(!R.isClassDeclaration(r))return;let o=v.Declarations.isPrivate(i),d=[],l;if(!o){let c=n.getSymbolAtLocation(r.name!==void 0?r.name:r);if(c===void 0||!v.Symbols.isClass(c))return;let p=R.escapeLeadingUnderscores(i.name.getText()),m,g=!1;for(let[I,P]of n.getAllSuperTypesWithPath(c)){if(c===I&&(g=!1,m=[]),g)continue;m.push(P);let B=P.members?.get(p);if(B!==void 0){if(v.Symbols.isInterface(P)||v.Symbols.isTypeLiteral(P))d.push(...m),g=!0;else if(v.Symbols.isClass(P))if(v.Symbols.isAbstract(B)){l=P;break}else{l=P;break}}}}if(o){let c=v.ClassDeclarations.getExtendsClause(r);if(c===void 0||c.types.length===0)return;{let p=n.getLeafSymbolAtLocation(c.types[0].expression);return p===void 0||!v.Symbols.isClass(p)?void 0:new rt(e,n,r,p,i)}}else{if(l!==void 0)return new ot(e,n,r,i,l);if(d.length>0){let c=d.filter(p=>{if(v.Symbols.isTypeLiteral(p))return!1;let m=p.escapedName;return!(m==="__type"||m==="__class")});return new st(e,n,r,i,c)}else return}}},Ie=class a extends we{classDeclaration;extendsSymbol;constructor(e,n,i,r,o){if(i instanceof a){let d=i,l=J.getNodeInProgram(e,d.declaration);super(e,n,l),this.classDeclaration=J.getNodeInProgram(e,d.classDeclaration);let c=d.extendsSymbol.declarations;if(c===void 0||c.length===0)throw new Error("No declarations found for extends symbol");let p;for(let m of c)if(R.isClassDeclaration(m)){let g=v.ClassDeclarations.getExtendsClause(m);if(g===void 0||g.types.length===0)throw new Error("No extends clause found");if(p=this.symbols.getSymbolAtLocation(g.types[0].expression),p===void 0||!v.Symbols.isClass(p))throw new Error("No extends symbol found");break}if(p===void 0)throw new Error("No extends symbol found");this.extendsSymbol=p}else super(e,n,o),this.classDeclaration=i,this.extendsSymbol=r}run(e,n){let i=this.getMemberName();for(let r of this.symbols.getDirectSubTypes(this.extendsSymbol,e.getPreferredNeighborFiles(this.program),e.getReferencedByContext(!0)))if(n.throwIfCancellationRequested(),r.members!==void 0){let o=r.members.get(i);if(o===void 0)continue;let d=o.declarations;if(d===void 0||d.length===0)continue;for(let l of d){if(l.kind!==this.declaration.kind)continue;let c=l.parent;if(!(!R.isClassDeclaration(c)||c===this.classDeclaration))return c}}}},rt=class a extends Ie{constructor(e,n,i,r,o){i instanceof a?super(e,n,i):super(e,n,i,r,o)}with(e){return e===this.program?this:new a(e,new v.Symbols(e),this)}getMemberName(){return R.escapeLeadingUnderscores(this.declaration.name.getText())}},ot=class a extends le{classDeclaration;startClass;constructor(e,n,i,r,o){if(i instanceof a){let d=i,l=J.getNodeInProgram(e,d.declaration);super(e,n,l),this.classDeclaration=J.getNodeInProgram(e,d.classDeclaration);let p=d.startClass.declarations;if(p===void 0||p.length===0)throw new N("No declarations found for start class",N.NoDeclaration);let m;for(let g of p)if(R.isClassDeclaration(g)&&(m=this.symbols.getSymbolAtLocation(g.name?g.name:g),m!==void 0))break;if(m===void 0)throw new N("No symbol found for start class",N.SymbolNotFound);this.startClass=m}else super(e,n,r),this.classDeclaration=i,this.startClass=o}with(e){return e===this.program?this:new a(e,new v.Symbols(e),this)}run(e,n){if(!v.Symbols.isClass(this.startClass))return;let i=R.escapeLeadingUnderscores(this.declaration.name.getText());for(let r of this.symbols.getAllSubTypes(this.startClass,v.Traversal.breadthFirst,e.getPreferredNeighborFiles(this.program),e.getReferencedByContext(!0)))if(n.throwIfCancellationRequested(),r.members!==void 0){let o=r.members.get(i);if(o===void 0)continue;let d=o.declarations;if(d===void 0||d.length===0)continue;for(let l of d){if(!R.isMethodDeclaration(l))continue;let c=l.parent;if(!(!R.isClassDeclaration(c)||c===this.classDeclaration))return c}}}},st=class a extends le{classDeclaration;typesToCheck;constructor(e,n,i,r,o){if(i instanceof a){let d=i,l=J.getNodeInProgram(e,d.declaration);super(e,n,l),this.classDeclaration=J.getNodeInProgram(e,d.classDeclaration);let c=[];for(let p of d.typesToCheck){let m=p.declarations;if(m===void 0||m.length===0)throw new N("No declarations found for start class",N.NoDeclaration);let g;for(let I of m)if(!(!R.isClassDeclaration(I)&&!R.isInterfaceDeclaration(I))&&(g=this.symbols.getSymbolAtLocation(I.name?I.name:I),g!==void 0&&g.flags===p.flags))break;if(g===void 0)throw new N("No symbol found for start class",N.SymbolNotFound);c.push(g)}this.typesToCheck=c}else super(e,n,r),this.classDeclaration=i,this.typesToCheck=o}with(e){return e===this.program?this:new a(e,new v.Symbols(e),this)}run(e,n){let i=R.escapeLeadingUnderscores(this.declaration.name.getText()),r=new Set(this.typesToCheck),o=[];for(let l of this.typesToCheck){n.throwIfCancellationRequested();for(let c of this.symbols.getDirectSubTypes(l,e.getPreferredNeighborFiles(this.program),e.getReferencedByContext(!0)))if(n.throwIfCancellationRequested(),!r.has(c)){if(v.Symbols.isClass(c)){let p=c.members?.get(i);if(p!==void 0&&!v.Symbols.isAbstract(p)){let m=v.ClassDeclarations.fromSymbol(c);if(m===this.classDeclaration)continue;if(m!==void 0)return m}}o.push(c)}}let d=new Set;for(let l of o)if(n.throwIfCancellationRequested(),!d.has(l)){for(let c of this.symbols.getAllSubTypes(l,v.Traversal.breadthFirst,e.getPreferredNeighborFiles(this.program),e.getReferencedByContext(!0)))if(n.throwIfCancellationRequested(),!d.has(c)){if(v.Symbols.isClass(c)){let p=c.members?.get(i);if(p!==void 0&&!v.Symbols.isAbstract(p)){let m=v.ClassDeclarations.fromSymbol(c);if(m===this.classDeclaration){d.add(c);continue}if(m!==void 0)return m}}d.add(c)}d.add(l)}}},De=class extends z{declaration;constructor(e,n,i){super(e,n,3),this.declaration=i}compute(e,n,i){if(i.throwIfCancellationRequested(),this.getSymbol()===void 0)return;let o=this.createSearch();if(o!==void 0){let[d,l]=this.session.run(o,n,i);if(d!==void 0&&l!==void 0){let c=this.declaration.getSourceFile(),p=new L(this.session,this.session.getSymbols(d),c,n.getSeenSymbols(this.session,d));p.addDeclaration(l),e.addSnippet(p,"blueprint",1)}}}},at=class extends De{constructor(e,n,i){super(e,n,i)}createSearch(){return le.create(this.getProgram(),this.symbols,this.declaration)}getSymbol(){let e=this.symbols.getSymbolAtLocation(this.declaration.name);return v.Symbols.isMethod(e)?e:void 0}},Pe=class extends O{declaration;constructor(e){super(e.body===void 0||e.body.statements.length===0?"wholeMethod":"method",R.SymbolFlags.Function),this.declaration=e}provide(e,n,i,r){r.throwIfCancellationRequested(),e.push(new ee(n,i,this.declaration,.9),new at(n,i,this.declaration))}},lt=class a extends Ie{constructor(e,n,i,r,o){i instanceof a?super(e,n,i):super(e,n,i,r,o)}with(e){return e===this.program?this:new a(e,new v.Symbols(e),this)}getMemberName(){return"__constructor"}},dt=class extends De{constructor(e,n,i){super(e,n,i)}createSearch(){let e=this.declaration.parent;if(!R.isClassDeclaration(e))return;let n=v.ClassDeclarations.getExtendsClause(e);if(!(n===void 0||n.types.length===0)){let i=this.symbols.getLeafSymbolAtLocation(n.types[0].expression);return i===void 0||!v.Symbols.isClass(i)?void 0:new lt(this.getProgram(),this.symbols,e,i,this.declaration)}}getSymbol(){let e=this.symbols.getSymbolAtLocation(this.declaration);return v.Symbols.isConstructor(e)?e:void 0}},Ae=class extends O{declaration;constructor(e){super(e.body===void 0||e.body.statements.length===0?"wholeConstructor":"constructor",R.SymbolFlags.Function),this.declaration=e}provide(e,n,i,r){r.throwIfCancellationRequested(),e.push(new ee(n,i,this.declaration,.9),new dt(n,i,this.declaration))}}});var de,ce,ct,Ne,kt=q(()=>{"use strict";H();ae();$();U();de=Q(W()),ce=A(),ct=class extends z{tokenAtCursor;symbolsToQuery;constructor(e,n,i,r,o=1){super(e,n,o),this.tokenAtCursor=i,this.symbolsToQuery=r}compute(e,n,i){i.throwIfCancellationRequested();let r=this.getProgram(),o=this.symbols,d=n.getSeenSymbols(this.session,r),l=this.tokenAtCursor.getSourceFile(),c=this.getModulesAndFunctionsInScope(r,o.getTypeChecker(),l);i.throwIfCancellationRequested();let p=new L(this.session,o,l,d);for(let m of c.functions.real)p.addFunctionSymbol(m);i.throwIfCancellationRequested();for(let{alias:m,real:g}of c.functions.aliased)p.addFunctionSymbol(g,m.getName());i.throwIfCancellationRequested(),p.isEmpty()||e.addSnippet(p,"generalScope",.8),p=new L(this.session,o,l,d);for(let{alias:m,real:g}of c.modules)p.addModuleSymbol(g,m.getName());i.throwIfCancellationRequested(),p.isEmpty()||e.addSnippet(p,"generalScope",.8)}getModulesAndFunctionsInScope(e,n,i){let r={functions:{real:[],aliased:[]},modules:[]},o=n.getSymbolsInScope(this.tokenAtCursor,this.symbolsToQuery|ce.SymbolFlags.Alias);for(let d of o){let l=d.declarations;if(l!==void 0)for(let c of l){let p=c.getSourceFile();if(!(e.isSourceFileDefaultLibrary(p)||e.isSourceFileFromExternalLibrary(p))){if(de.Symbols.isFunction(d)&&this.includeFunctions()&&p!==i){r.functions.real.push(d);break}else if(de.Symbols.isAlias(d)){let m=n.getAliasedSymbol(d);if(de.Symbols.isFunction(m)&&this.includeFunctions()){r.functions.aliased.push({alias:d,real:m});break}else if(de.Symbols.isValueModule(m)&&this.includeValueModules()){r.modules.push({alias:d,real:m});break}}}}}return r}includeFunctions(){return(this.symbolsToQuery&ce.SymbolFlags.Function)!==0}includeValueModules(){return(this.symbolsToQuery&ce.SymbolFlags.ValueModule)!==0}},Ne=class extends O{tokenAtCursor;computeInfo;constructor(e,n){super("sourceFile",ce.SymbolFlags.Function),this.tokenAtCursor=e,this.computeInfo=n}provide(e,n,i,r){r.throwIfCancellationRequested();let o=this.computeInfo.getSymbolsToQuery();o!==void 0&&o!==ce.SymbolFlags.None&&e.push(new ct(n,i,this.tokenAtCursor,o,2))}}});function wt(a,e,n,i,r,o,d){let l=n.getProgram();if(l===void 0)return;let c=l.getSourceFile(i);if(c===void 0)return;e.reconcile();let p=l.getCompilerOptions();a.addTrait(.5,"The TypeScript version used in this project is ",D.version,"version");for(let[I,P,B,G]of Gt){let j=p[G];if(j){if(typeof j=="number"){let T=Qt(B,j);T&&(j=T)}a.addTrait(P,I,j.toString(),G)}}let m=Wt(c,r);if(m.token.kind===D.SyntaxKind.EndOfFileToken)return;new ft(m,o).execute(a,e,n,d)}function Qt(a,e){return Object.keys(a).find(n=>a[n]===e)}function Wt(a,e){let n=Ee.default.getTokenAtPosition(a,e);for(;n.kind===D.SyntaxKind.EndOfFileToken&&e>1;)n=Ee.default.getTokenAtPosition(a,--e);if(n.kind===D.SyntaxKind.EndOfFileToken)return{token:n};let i={token:n},r=!0;if(e>n.getStart(a))i.touching=n,r=!1;else if(e<n.getStart(a)){let o=n.parent;for(;o!==void 0;){if(e>=o.getStart(a)){i.touching=o;break}o=o.parent}}if(r){let o=n;for(;o.parent;){let d=ut(o.parent,a),l=$t(d,o);if(l>0){let c=d[l-1],p=ut(c,a);for(;p.length>0;){let m=p[p.length-1];if(m.kind===D.SyntaxKind.EndOfFileToken)break;c=m,p=ut(c,a)}if(c.kind!==D.SyntaxKind.EndOfFileToken){i.previous=c;break}}o=o.parent}}return i}function ut(a,e){if(D.isSourceFile(a)){let n=a.getChildren(e);return n.length>0&&n[0].kind===D.SyntaxKind.SyntaxList?n[0].getChildren(e):a.statements}else return a.getChildren(e)}function $t(a,e){let n=0,i=a.length-1;for(;n<=i;){let r=Math.floor((n+i)/2),o=a[r].getStart(),d=e.getStart();if(o===d)return a[r]===e?r:-1;o<d?n=r+1:i=r-1}return-1}var Ee,D,pt,ft,Gt,It=q(()=>{"use strict";H();Tt();$();vt();Ft();U();kt();Ee=Q(W()),D=A(),pt=class{completionKind;symbolsToQuery;constructor(){this.completionKind=void 0,this.symbolsToQuery=D.SymbolFlags.None}update(e){return this.completionKind===void 0&&(this.completionKind=e.contextKind),e.symbolsToQuery!==void 0&&e.symbolsToQuery!==D.SymbolFlags.None&&(this.symbolsToQuery|=e.symbolsToQuery),e}getCompletionKind(){return this.completionKind??"none"}getSymbolsToQuery(){return this.symbolsToQuery}},ft=class a{static Factories=new Map([[D.SyntaxKind.SourceFile,(e,n,i)=>new Ne(n,i)],[D.SyntaxKind.FunctionDeclaration,(e,n)=>new ke(e)],[D.SyntaxKind.ClassDeclaration,ve.create],[D.SyntaxKind.Constructor,(e,n)=>new Ae(e)],[D.SyntaxKind.MethodDeclaration,(e,n)=>new Pe(e)]]);tokenInfo;computeInfo;neighborFiles;constructor(e,n){this.tokenInfo=e,this.computeInfo=new pt,this.neighborFiles=n}execute(e,n,i,r){let o=this.computeInfo.getCompletionKind();e.addMetaData(o,Ee.default.StableSyntaxKinds.getPath(this.tokenInfo.touching??this.tokenInfo.token));let d=this.getContextComputeRunnables(n,i,r),l=[];if(this.neighborFiles!==void 0)for(let p of this.neighborFiles)l.push(D.server.toNormalizedPath(p));let c=new he(l);for(let p of d){r.throwIfCancellationRequested();try{p.compute(e,c,r)}catch(m){if(m instanceof N)e.addErrorData(m);else throw m}}}getContextComputeRunnables(e,n,i){let r=[],o=this.computeProviders();for(let d of o)d.provide(r,e,n,i);return r.sort((d,l)=>d.cost-l.cost),r}computeProviders(){let e=[];if(this.tokenInfo.previous!==void 0){let i=this.tokenInfo.previous;for(;i!==void 0;)D.isPropertyAccessExpression(i)||D.isIdentifier(i),i=i.parent}let n=this.tokenInfo.touching??this.tokenInfo.token;if(n!==void 0){let i=n;for(;i!==void 0;){let r=a.Factories.get(i.kind);if(r!==void 0){let o=r(i,n,this.computeInfo);o!==void 0&&e.push(this.computeInfo.update(o))}i=i.parent}}return e}},Gt=[["The TypeScript module system used in this project is ",1,D.ModuleKind,"module"],["The TypeScript module resolution strategy used in this project is ",1,D.ModuleResolutionKind,"moduleResolution"],["The target version of JavaScript for this project is ",1,D.ScriptTarget,"target"],["Library files that should be included in TypeScript compilation are ",1,void 0,"lib"]]});var Dt,Me,Pt=q(()=>{"use strict";Dt=Q(require("crypto")),Me=class{constructor(){}createHash(e){return Dt.default.createHash(e)}isDebugging(){return process.execArgv.some(e=>/^--(?:inspect|debug)(?:-brk)?(?:=\d+)?$/i.test(e))}}});var Et={};Ht(Et,{create:()=>Xt});function Xt(a){if(At)return a.languageService;if(a.session!==void 0)try{a.session.addProtocolHandler("_.copilot.ping",()=>({response:Le,responseRequired:!0}));try{let e=Zt();Le={kind:"ok",session:!0,supported:e,version:mt.version},e&&(ue=new be(a.session,new Me),yt=a.languageServiceHost,a.session.addProtocolHandler("_.copilot.context",Yt))}catch(e){e instanceof Error?(Le={kind:"error",message:e.message,stack:e.stack},a.session.logError(e,"_.copilot.installHandler")):(Le={kind:"error",message:"Unknown error"},a.session.logError(new Error("Unknown error"),"_.copilot.installHandler"))}}catch(e){e instanceof Error?a.session.logError(e,"_.copilot.installPingHandler"):a.session.logError(new Error("Unknown error"),"_.copilot.installPingHandler")}finally{At=!0}return a.languageService}function Zt(){try{let a=mt.versionMajorMinor.split(".");if(a.length<2)return!1;let e=parseInt(a[0]),n=parseInt(a[1]);return e>5||e===5&&n>=5}catch{return!1}}var Nt,mt,At,ue,yt,Le,Yt,Mt=q(()=>{"use strict";It();$();U();Nt=Q(W());H();Pt();mt=A(),At=!1,Le={kind:"error",message:"Attempt to install context handler failed"},Yt=a=>{if(a.arguments===void 0)return{response:{error:"noArguments",message:"No arguments provided"},responseRequired:!0};let e=a.arguments,n=ue?.getFileAndProject(e);if(n===void 0)return{response:{error:"noProject",message:"No project found"},responseRequired:!0};if(typeof e.line!="number"||typeof e.offset!="number")return{response:{error:"invalidArguments",message:"No project found"},responseRequired:!0};let{file:i,project:r}=n,o=ue?.getPositionInFile(e,i);if(o===void 0)return{response:{error:"invalidPosition",message:"Position not valid"},responseRequired:!0};let d=typeof e.timeBudget=="number"?e.timeBudget:75,l=new Nt.CancellationTokenWithTimer(yt?.getCancellationToken?yt.getCancellationToken():void 0,d,ue?.host.isDebugging()??!1),c=new xe(typeof e.tokenBudget=="number"?e.tokenBudget:7*1024),p=new ge(c);try{wt(p,ue,r.getLanguageService(),i,o,e.neighborFiles,l)}catch(m){if(!(m instanceof mt.OperationCanceledException)&&!(m instanceof oe))return m instanceof Error?{response:{error:"exception",message:m.message,stack:m.stack},responseRequired:!0}:{response:{error:"exception",message:"Unknown error"},responseRequired:!0}}return{response:{items:p.items,timedOut:l.isTimedOut(),tokenBudgetExhausted:c.isExhausted()},responseRequired:!0}}});H();var Lt=!1,St;function en(a){if(!Lt)try{A.install(a.typescript),St=(Mt(),zt(Et)).create}finally{Lt=!0}if(St===void 0)throw new Error("Couldn't initialize TypeScript Context Server Plugin.");return{create:St}}module.exports=en;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                